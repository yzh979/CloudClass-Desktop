# Vocab PWA App - Setup Instructions

## Prerequisites

- Node.js 14+ and Yarn
- Modern web browser (Chrome, Firefox, Safari, Edge)

## Installation Steps

### 1. Install Dependencies

From the project root:

```bash
cd /home/engine/project
yarn bootstrap
```

Or from this package directory:

```bash
cd packages/vocab-pwa-app
yarn install
```

### 2. Generate Proper Icons (Optional but Recommended)

The app currently uses SVG placeholders for icons. For production, generate proper PNG icons:

**Option A: Using online tool**
1. Open `public/icons/generate-icons.html` in a browser
2. Right-click each canvas and save as PNG
3. Name them according to size (e.g., `icon-192x192.png`)

**Option B: Using CLI tool**
```bash
npx @capacitor/assets generate --iconBackgroundColor "#4f46e5"
```

**Option C: Using online service**
- Visit https://realfavicongenerator.net/
- Upload `public/icons/icon.svg`
- Download and extract to `public/icons/`

### 3. Development

Start the development server:

```bash
yarn dev
```

The app will open at http://localhost:3000

### 4. Building for Production

```bash
yarn build
```

Output will be in the `dist/` directory.

### 5. Testing the PWA

#### On Desktop:
1. Build the app (`yarn build`)
2. Serve the dist folder:
   ```bash
   npx serve dist
   ```
3. Open in Chrome/Edge
4. Look for install icon in address bar

#### On Mobile:
1. Deploy to a server with HTTPS
2. Open in mobile browser
3. Use "Add to Home Screen" option

## Alternative: No-Build Development

If you have dependency installation issues, you can test the app without build tools:

1. Start a simple HTTP server in the project root:
   ```bash
   cd packages/vocab-pwa-app
   python3 -m http.server 8000
   # or
   npx serve .
   ```

2. Create a simple HTML file that loads modules:
   - Modern browsers support ES modules
   - Service worker won't work without HTTPS in production

## Project Structure

```
vocab-pwa-app/
├── public/
│   ├── index.html              # Main HTML file
│   ├── manifest.json           # PWA manifest
│   ├── icons/                  # App icons
│   ├── sample-words.csv        # Sample vocabulary
│   └── sample-words.txt        # Sample vocabulary
├── src/
│   ├── js/
│   │   ├── app.js              # Main application
│   │   ├── storage.js          # IndexedDB wrapper
│   │   ├── audioPlayer.js      # TTS and audio
│   │   ├── fileImporter.js     # File parsing
│   │   ├── wordBank.js         # Vocabulary management
│   │   ├── exerciseEngine.js   # Learning modes
│   │   └── shortcutManager.js  # Keyboard/gestures
│   └── css/
│       └── main.css            # Styles
├── webpack.config.js           # Webpack configuration
├── package.json                # Dependencies
└── README.md                   # Documentation
```

## Features Implemented

### ✅ PWA Core
- [x] Web App Manifest
- [x] Service Worker (auto-generated by Workbox)
- [x] Offline support
- [x] Installable on desktop and mobile
- [x] Responsive design (mobile-first)

### ✅ Data Management
- [x] IndexedDB for local storage
- [x] Import from TXT/CSV files
- [x] Manual word entry
- [x] Export to CSV/JSON
- [x] Three word banks (Active, Familiar, Difficult)

### ✅ Learning Modes
- [x] Mode 1: Spelling Practice
- [x] Mode 2: Chinese to English (Multiple Choice)
- [x] Mode 3: English to Chinese (Multiple Choice)
- [x] Mode 4: Audio to English (Multiple Choice)
- [x] Mode 5: Audio to Chinese (Multiple Choice)

### ✅ Audio System
- [x] Google TTS integration
- [x] Web Speech API fallback
- [x] Audio caching
- [x] Adjustable playback speed
- [x] Auto-play option

### ✅ User Interface
- [x] Responsive layout (320px - 4K)
- [x] Touch-friendly (44px minimum targets)
- [x] Dark mode support
- [x] Font size adjustment
- [x] Bottom navigation (mobile)
- [x] Side menu (desktop)
- [x] Toast notifications
- [x] Loading states

### ✅ Controls
- [x] Keyboard shortcuts (desktop)
- [x] Touch gestures (mobile)
- [x] Haptic feedback support
- [x] Screen wake lock during practice

### ✅ Progress Tracking
- [x] Session statistics
- [x] Accuracy tracking
- [x] Review count per word
- [x] Last reviewed timestamp

## Testing Checklist

### Functional Testing
- [ ] Import TXT file
- [ ] Import CSV file
- [ ] Manual word entry
- [ ] All 5 learning modes work
- [ ] Audio playback
- [ ] Word bank category switching
- [ ] Export functionality
- [ ] Settings persistence
- [ ] Theme switching

### PWA Testing
- [ ] Manifest loads correctly
- [ ] Service worker registers
- [ ] Install prompt appears
- [ ] App works offline (after first load)
- [ ] Icons display correctly
- [ ] Add to home screen works (mobile)

### Responsive Testing
- [ ] Works on 320px width (iPhone SE)
- [ ] Works on tablet (768px)
- [ ] Works on desktop (1024px+)
- [ ] Portrait and landscape modes
- [ ] Touch targets >= 44px

### Cross-browser Testing
- [ ] Chrome/Edge
- [ ] Firefox
- [ ] Safari (desktop)
- [ ] Mobile Safari (iOS)
- [ ] Chrome (Android)

### Performance Testing
- [ ] Lighthouse PWA score > 90
- [ ] First Contentful Paint < 2s
- [ ] Time to Interactive < 5s
- [ ] Smooth animations (60fps)

## Troubleshooting

### Issue: Dependencies won't install
**Solution**: Try clearing cache and reinstalling:
```bash
rm -rf node_modules yarn.lock
yarn install
```

### Issue: Service Worker not registering
**Solution**: Ensure you're running on HTTPS or localhost. Check DevTools > Application > Service Workers.

### Issue: Audio not playing on iOS
**Solution**: iOS requires user interaction before audio. The app handles this by enabling audio on first user tap.

### Issue: Icons not showing
**Solution**: Generate proper PNG icons using one of the methods in step 2.

### Issue: Can't import files on mobile
**Solution**: Ensure the file input accepts .txt and .csv. Use the file picker or try manual entry.

## Deployment

### Static Hosting (Recommended)
Deploy to services like:
- Vercel: `vercel --prod`
- Netlify: Drag-and-drop `dist/` folder
- GitHub Pages: Push `dist/` to `gh-pages` branch
- Firebase Hosting: `firebase deploy`

### Requirements for PWA
- **HTTPS**: Required for service workers
- **Valid manifest**: Check with Lighthouse
- **Icons**: All sizes present
- **Service worker**: Must register successfully

## Browser Support

| Browser | Version | Support |
|---------|---------|---------|
| Chrome | 90+ | ✅ Full |
| Firefox | 88+ | ✅ Full |
| Safari | 14+ | ✅ Full |
| Edge | 90+ | ✅ Full |
| iOS Safari | 14+ | ⚠️ No push notifications |
| Android Chrome | 8+ | ✅ Full |

## Known Limitations

1. **iOS Safari**: No push notifications support
2. **Audio autoplay**: Blocked until user interaction (all mobile browsers)
3. **File system**: Limited on mobile, uses File API
4. **Service worker**: Development mode doesn't generate it (production only)

## Next Steps

After setup:
1. Import sample vocabulary from `public/sample-words.csv`
2. Try each of the 5 learning modes
3. Test installation on your device
4. Customize theme colors in `manifest.json`
5. Deploy to a hosting service

## Support

For issues or questions:
1. Check browser DevTools console for errors
2. Verify all files are present
3. Check Network tab for failed requests
4. Test in Incognito/Private mode
